steps:
     deploy:
          name: build_and_deploy
          image: docker:26
          when:
               event: push
               branch: main
          volumes:
               - /var/run/docker.sock:/var/run/docker.sock
          commands:
               - echo "ğŸš€ Building new Docker image..."
               - docker build -t my-app:latest .
               - echo "ğŸ§¹ Removing old container..."
               - docker rm -f my-app || true
               - echo "â–¶ï¸ Starting updated container..."
               - docker run -d --name my-app -p 3000:3000 my-app:latest
